#!/system/bin/sh
# safe_move: Balkava OS safe file/directory mover üõ°Ô∏è

help() {
    echo "safe_move: balkava os safe file/directory mover"
    echo "usage: safe_move <file|dir> <outdir>"
    exit 1
}

CURRENT="$1"
OUTDIR="$2"

# Args check
if [ -z "$CURRENT" ] || [ -z "$OUTDIR" ]; then
    help
fi

# Existence checks
if [ ! -e "$CURRENT" ]; then
    echo "‚ùå no file/directory specified"
    exit 1
fi

if [ ! -d "$OUTDIR" ]; then
    echo "‚ùå output directory does not exist"
    exit 1
fi

# Lock, move, unlock
chmod 555 "$OUTDIR/*"
if mv "$CURRENT" "$OUTDIR/"; then
    echo "‚úÖ safely moved $CURRENT ‚Üí $OUTDIR/"
else
    echo "‚ùå move failed"
fi
chmod 700 "$OUTDIR"